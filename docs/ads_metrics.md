# Google Ads メトリクス定義

## 概要
このドキュメントでは、Google Ads統合ダッシュボードで使用されるメトリクスの定義と計算方法について説明します。

## 基本メトリクス

### コスト関連
- **Cost (JPY)**: Google Adsのコスト（円）
  - 計算: `cost_micros / 1,000,000`
  - 単位: 円
  - 説明: Google Ads APIから取得したcost_microsを円に変換

- **CPC (Cost Per Click)**: クリック単価
  - 計算: `cost / clicks`
  - 単位: 円/クリック
  - 説明: 1クリックあたりのコスト

- **CPA (Cost Per Acquisition)**: 獲得単価
  - 計算: `cost / conversions`
  - 単位: 円/コンバージョン
  - 説明: 1コンバージョンあたりのコスト

### パフォーマンス関連
- **ROAS (Return on Ad Spend)**: 広告費用対効果
  - 計算: `conversion_value / cost`
  - 単位: 倍率
  - 説明: 広告費用に対する収益の比率

- **CTR (Click-Through Rate)**: クリック率
  - 計算: `clicks / impressions`
  - 単位: パーセンテージ
  - 説明: 表示回数に対するクリック数の比率

- **CVR (Conversion Rate)**: コンバージョン率
  - 計算: `conversions / clicks`
  - 単位: パーセンテージ
  - 説明: クリック数に対するコンバージョン数の比率

## 統合メトリクス

### GA4連携
- **GA4 Sessions**: Google Analytics 4のセッション数
  - 説明: Google Adsからの流入によるGA4セッション数

- **GA4 Purchases**: Google Analytics 4の購入イベント数
  - 説明: Google Adsからの流入による購入イベント数

- **GA4 Revenue**: Google Analytics 4の収益
  - 説明: Google Adsからの流入によるGA4収益（推定値）

### Shopify連携
- **Shopify Orders**: Shopifyの注文数
  - 説明: Google Adsからの流入によるShopify注文数

- **Shopify Revenue**: Shopifyの収益
  - 説明: Google Adsからの流入によるShopify収益（実際の売上）

## アトリビューション

### アトリビューション方法
1. **UTM パラメータ**: Shopify注文のUTMパラメータを使用
2. **GCLID**: Google Click IDを使用（利用可能な場合）
3. **キャンペーン名マッピング**: 手動設定によるキャンペーン名の紐付け

### アトリビューションルール
- **プライマリ**: キャンペーン名の一致（source=google, medium=cpc）
- **フォールバック**: UTMパラメータによる紐付け
- **デフォルト**: 直接的な紐付けができない場合は未帰属として分類

## データ品質

### 検証ルール
- **非負値**: コスト、クリック数、コンバージョン数は0以上
- **論理チェック**: CTRは0-1の範囲、ROASは0以上の値
- **日付整合性**: すべてのデータは指定期間内

### データソース
- **Google Ads API**: キャンペーン、広告グループ、キーワードレベルのデータ
- **Google Analytics 4**: セッション、イベント、収益データ
- **Shopify API**: 注文、商品、売上データ

## パフォーマンス閾値

### 推奨閾値
- **ROAS 最小値**: 2.0（広告費用の2倍の収益）
- **CPA 最大値**: 5,000円（1コンバージョンあたりの最大コスト）
- **CPC 最大値**: 500円（1クリックあたりの最大コスト）
- **CTR 最小値**: 1%（クリック率の最小値）

### アラート設定
- **低パフォーマンス**: ROAS < 1.5 かつコスト > 10,000円
- **高コスト**: CPC > 1,000円 または CPA > 10,000円
- **低エンゲージメント**: CTR < 0.5%

## 計算例

### 例1: キャンペーンパフォーマンス
```
キャンペーン: "コーヒー豆ブランド認知"
期間: 2025-08-01 から 2025-08-07

コスト: 50,000円
クリック数: 1,000
コンバージョン数: 25
コンバージョン価値: 200,000円

CPC = 50,000 / 1,000 = 50円
CPA = 50,000 / 25 = 2,000円
ROAS = 200,000 / 50,000 = 4.0
CTR = 1,000 / 10,000 = 10%
CVR = 25 / 1,000 = 2.5%
```

### 例2: 統合分析
```
Google Ads:
- コスト: 30,000円
- クリック数: 600

GA4:
- セッション数: 550
- 購入数: 15
- 収益: 120,000円

Shopify:
- 注文数: 12
- 売上: 100,000円

統合ROAS = 100,000 / 30,000 = 3.33
```

## 注意事項

### データの制限
- **Google Ads API**: 過去13ヶ月のデータのみ取得可能
- **GA4 API**: ディメンションとメトリクスの組み合わせに制限あり
- **Shopify API**: 注文データの取得に制限あり

### アトリビューションの課題
- **クロスデバイス**: 同一ユーザーの複数デバイスでの行動追跡の困難
- **アトリビューションウィンドウ**: デフォルト30日、設定により変更可能
- **データの遅延**: リアルタイムデータとレポートデータの差異

### 推奨事項
1. **定期的なデータ更新**: 日次でのデータ取得を推奨
2. **データ品質チェック**: 異常値の検出と修正
3. **パフォーマンス監視**: 閾値ベースのアラート設定
4. **定期的な分析**: 週次・月次でのパフォーマンスレビュー
