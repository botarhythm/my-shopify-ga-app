# 改善されたグラフと数値表示

## 概要

月別成長率と注文数のグラフと数値を正確で判断しやすいものに大幅改善しました。

## 主要改善点

### 1. YoY成長率チャートの改善

#### **改善前の問題**
- 色分けが不明確
- 数値が読みにくい
- ゼロラインが不明確

#### **改善後の特徴**
- **明確な色分け**: プラス成長（緑）、マイナス成長（赤）
- **数値表示**: 各バーに成長率を直接表示（例：+6.8%、-59.5%）
- **ゼロライン**: 黒い破線でゼロラインを明示
- **ホバー情報**: 詳細な情報をマウスオーバーで表示
- **日付フォーマット**: YYYY-MM形式で見やすく表示

### 2. 注文数チャートの改善

#### **改善前の問題**
- Shopifyのみの表示
- プラットフォーム比較が困難

#### **改善後の特徴**
- **グループバー**: Shopify注文とSquare支払いを並べて比較
- **色分け**: Shopify（青）、Square（オレンジ）
- **数値表示**: 各バーに注文数を直接表示
- **詳細ホバー**: プラットフォーム別の詳細情報

### 3. 売上金額チャートの追加

#### **新機能**
- **今年vs前年比較**: 今年の売上と前年同月売上を並べて表示
- **金額表示**: 各バーに売上金額を直接表示（例：¥324,854）
- **色分け**: 今年売上（緑）、前年同月売上（赤）

### 4. 数値表示の改善

#### **テーブル表示の改善**
- **色分け**: YoY成長率に応じた背景色
  - プラス成長: 薄緑背景
  - マイナス成長: 薄赤背景
  - ゼロ成長: 薄黄背景
- **フォーマット**: 金額は¥記号付き、成長率は%記号付き

#### **サマリー情報の追加**
- **平均YoY成長率**: 全期間の平均成長率
- **総注文数**: Shopify + Squareの合計注文数
- **総売上**: 全期間の合計売上金額
- **最高成長月**: 最も成長率が高い月とその成長率

## 具体的な改善例

### YoY成長率チャート
```
改善前: 不明確な色分け、数値が読みにくい
改善後: 
- 2025-09: -59.5% (赤色バー)
- 2025-08: +6.8% (緑色バー)
- 2025-07: +120.9% (緑色バー)
```

### 注文数チャート
```
改善前: Shopifyのみ表示
改善後:
- 2025-09: Shopify 4件, Square 28件
- 2025-08: Shopify 15件, Square 79件
- 2025-07: Shopify 19件, Square 87件
```

### 売上金額チャート
```
新機能:
- 2025-09: 今年 ¥135,494 vs 前年 ¥334,964
- 2025-08: 今年 ¥324,854 vs 前年 ¥304,186
- 2025-07: 今年 ¥828,835 vs 前年 ¥375,243
```

## 技術的改善

### 1. チャートライブラリの最適化
- **Plotly Graph Objects**: より細かい制御が可能
- **カスタムスタイリング**: 色、フォント、レイアウトの最適化
- **インタラクティブ機能**: ホバー、ズーム、パンの改善

### 2. データ表示の最適化
- **数値フォーマット**: 読みやすい形式での表示
- **色分けロジック**: 成長率に応じた自動色分け
- **レスポンシブデザイン**: 画面サイズに応じた最適表示

### 3. ユーザビリティの向上
- **直感的な色分け**: 緑=良い、赤=注意
- **明確な数値表示**: 各バーに数値を直接表示
- **詳細情報**: ホバーで詳細情報を表示

## アクセス方法

**URL**: http://localhost:8505

## 使用方法

### 1. 月選択
- ドロップダウンで分析したい月を選択
- データとチャートが自動更新

### 2. チャート操作
- **ズーム**: マウスホイールでズーム
- **パン**: ドラッグで移動
- **ホバー**: マウスオーバーで詳細情報
- **リセット**: ダブルクリックでリセット

### 3. データ解釈
- **緑色バー**: プラス成長（良い傾向）
- **赤色バー**: マイナス成長（注意が必要）
- **ゼロライン**: 成長率0%の基準線

## 今後の拡張予定

1. **期間選択**: 日付範囲での柔軟な分析
2. **エクスポート機能**: チャートの画像保存
3. **アラート機能**: 異常値の自動検出
4. **予測機能**: 将来のトレンド予測

## トラブルシューティング

### よくある問題
1. **チャートが表示されない**: ブラウザのリロードを試してください
2. **数値が正しくない**: データ更新ボタンを押してください
3. **色分けが反映されない**: JavaScriptが有効になっているか確認してください

### サポート
問題が発生した場合は、以下の情報を含めて報告してください:
- 選択した月
- 表示されているチャート
- エラーメッセージ
- ブラウザ情報
